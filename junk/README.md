There was a mistake in this solution, buffering was added at the outputs instead of the inputs!